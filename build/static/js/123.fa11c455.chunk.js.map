{"version":3,"file":"static/js/123.fa11c455.chunk.js","mappings":"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","sources":["components/views/Reports.js","components/ui/Input.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  BarChart2, \n  Clock, \n  Calendar,\n  Filter,\n  Download,\n  Search,\n  CheckCircle,\n  AlertTriangle,\n  Briefcase,\n  TrendingUp,\n  Calendar as CalendarIcon\n} from 'lucide-react';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport Modal from '../ui/Modal';\nimport { useAuth } from '../../contexts/AuthContext';\n\nconst Reports = () => {\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState('task');\n  const [tasks, setTasks] = useState([]);\n  const [employees, setEmployees] = useState([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Filter states for Task Report\n  const [taskReportFilters, setTaskReportFilters] = useState({\n    startDate: '',\n    endDate: '',\n    department: '',\n    assignedTo: '',\n    status: '',\n    priority: '',\n    label: '',\n    dueDateFrom: '',\n    dueDateTo: ''\n  });\n\n  // Filter states for DWM Report\n  const [dwmReportFilters, setDwmReportFilters] = useState({\n    department: '',\n    employee: '',\n    startDate: '2025-08-01',\n    endDate: '2025-08-05'\n  });\n\n  // Filter modal state\n  const [showFilterModal, setShowFilterModal] = useState(false);\n\n  // Fetch data\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      \n      // Build tasks URL with optional department/employee filters for Reports\n      let tasksUrl = '/api/tasks';\n      const reportParams = new URLSearchParams();\n      reportParams.set('all', 'true'); // Get all tasks for reports\n      if (user) {\n        reportParams.set('user_id', user.id);\n        reportParams.set('role', user.role);\n        reportParams.set('employee_name', user.name || '');\n      }\n      if (dwmReportFilters.department) reportParams.set('department', dwmReportFilters.department);\n      if (dwmReportFilters.employee) reportParams.set('employee', dwmReportFilters.employee);\n      const queryStr = reportParams.toString();\n      if (queryStr) tasksUrl += `?${queryStr}`;\n      \n      // Prepare headers with user permissions for the tasks request\n      const tasksHeaders = {};\n      if (user) {\n        tasksHeaders['user-role'] = user.role || 'employee';\n        tasksHeaders['user-permissions'] = JSON.stringify((user.role === 'admin' || user.role === 'Admin') ? ['all'] : (user.permissions || []));\n        tasksHeaders['user-name'] = user.name || '';\n        \n        // Debug logging\n        console.log('ðŸ” Reports Debug - User Info:', {\n          userRole: user.role,\n          userName: user.name,\n          userPermissions: user.permissions,\n          employeeName: user.name || ''\n        });\n        console.log('ðŸ” Reports Debug - Request Headers:', tasksHeaders);\n        console.log('ðŸ” Reports Debug - Request URL:', tasksUrl);\n      }\n      \n      const [tasksResponse, employeesResponse] = await Promise.all([\n        fetch(tasksUrl, { headers: tasksHeaders }),\n        fetch('/api/employees')\n      ]);\n\n      if (tasksResponse.ok && employeesResponse.ok) {\n        const tasksData = await tasksResponse.json();\n        const employeesData = await employeesResponse.json();\n        \n        // Debug logging\n        console.log('ðŸ” Reports Debug - Tasks Data:', tasksData);\n        console.log('ðŸ” Reports Debug - Tasks Count:', tasksData.length);\n        \n        setTasks(Array.isArray(tasksData.data) ? tasksData.data : (Array.isArray(tasksData) ? tasksData : []));\n        setEmployees(Array.isArray(employeesData.data) ? employeesData.data : (Array.isArray(employeesData) ? employeesData : []));\n      } else {\n        console.error('ðŸ” Reports Debug - API Error:', {\n          tasksStatus: tasksResponse.status,\n          employeesStatus: employeesResponse.status\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [dwmReportFilters.department, dwmReportFilters.employee]);\n\n  // Calculate task statistics\n  const calculateTaskStats = () => {\n    const filteredTasks = filterTasks(tasks, taskReportFilters);\n    return {\n      total: filteredTasks.length,\n      completed: filteredTasks.filter(task => task.status === 'Completed').length,\n      inProgress: filteredTasks.filter(task => task.status === 'In Progress').length,\n      overdue: filteredTasks.filter(task => {\n        if (!task.due_date) return false;\n        return new Date(task.due_date) < new Date() && task.status !== 'Completed';\n      }).length\n    };\n  };\n\n  // Filter tasks based on filters\n  const filterTasks = (taskList, filters) => {\n    return taskList.filter(task => {\n      if (filters.startDate && task.created_at) {\n        const taskDate = new Date(task.created_at);\n        const startDate = new Date(filters.startDate);\n        if (taskDate < startDate) return false;\n      }\n      if (filters.endDate && task.created_at) {\n        const taskDate = new Date(task.created_at);\n        const endDate = new Date(filters.endDate);\n        if (taskDate > endDate) return false;\n      }\n      if (filters.department && task.department !== filters.department) return false;\n      if (filters.assignedTo && task.assigned_to !== filters.assignedTo) return false;\n      if (filters.status && task.status !== filters.status) return false;\n      if (filters.priority && task.priority !== filters.priority) return false;\n      if (filters.label && !task.labels?.toLowerCase().includes(filters.label.toLowerCase())) return false;\n      if (filters.dueDateFrom && task.due_date) {\n        const taskDueDate = new Date(task.due_date);\n        const fromDate = new Date(filters.dueDateFrom);\n        if (taskDueDate < fromDate) return false;\n      }\n      if (filters.dueDateTo && task.due_date) {\n        const taskDueDate = new Date(task.due_date);\n        const toDate = new Date(filters.dueDateTo);\n        if (taskDueDate > toDate) return false;\n      }\n      return true;\n    });\n  };\n\n  // DWM Report Logic (server-driven using history to count completions per day)\n  const calculateDWMStats = () => {\n    const { startDate, endDate, department, employee } = dwmReportFilters;\n    if (!startDate || !endDate) return [];\n\n    // Build a date list for the range\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    if (isNaN(start.getTime()) || isNaN(end.getTime())) return [];\n\n    const dayList = [];\n    for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\n      dayList.push(new Date(d));\n    }\n\n    // Fetch aggregated completions from server\n    const params = new URLSearchParams({ startDate, endDate });\n    if (department) params.append('department', department);\n    if (employee) params.append('employee', employee);\n\n    // Note: This is synchronous within render; in production, move to useEffect + state\n    // For now, compute from cached fetch below\n    return dwmAggregatesToRows(dayList, dwmAggregates, tasks, dwmReportFilters);\n  };\n\n  // Hold server aggregates\n  const [dwmAggregates, setDwmAggregates] = useState([]);\n\n  useEffect(() => {\n    const loadAggregates = async () => {\n      try {\n        const { startDate, endDate, department, employee } = dwmReportFilters;\n        if (!startDate || !endDate) { setDwmAggregates([]); return; }\n        const params = new URLSearchParams({ startDate, endDate });\n        if (department) params.append('department', department);\n        if (employee) params.append('employee', employee);\n        const res = await fetch(`/api/reports/dwm?${params.toString()}`);\n        if (res.ok) {\n          const data = await res.json();\n          setDwmAggregates(data);\n        } else {\n          setDwmAggregates([]);\n        }\n      } catch (e) {\n        console.error('Failed to load DWM aggregates', e);\n        setDwmAggregates([]);\n      }\n    };\n    loadAggregates();\n  }, [dwmReportFilters.startDate, dwmReportFilters.endDate, dwmReportFilters.department, dwmReportFilters.employee]);\n\n  function dwmAggregatesToRows(dayList, aggregates, allTasks, filters) {\n    // Use backend's total counts instead of calculating locally\n    return dayList.map(day => {\n      const dayIso = new Date(day.getTime() - day.getTimezoneOffset()*60000).toISOString().slice(0,10);\n      const pretty = day.toLocaleDateString('en-US', { weekday:'long', year:'numeric', month:'long', day:'numeric' });\n\n      // Find the backend data for this day\n      const row = aggregates.find(a => a.day === dayIso) || { \n        daily_completed: 0, daily_total: 0,\n        weekly_completed: 0, weekly_total: 0,\n        monthly_completed: 0, monthly_total: 0\n      };\n\n      return {\n        date: pretty,\n        daily: `${row.daily_completed}/${row.daily_total}`,\n        weekly: row.weekly_total > 0 ? `${row.weekly_completed}/${row.weekly_total}` : 'N/A',\n        monthly: row.monthly_total > 0 ? `${row.monthly_completed}/${row.monthly_total}` : 'N/A'\n      };\n    });\n  }\n\n  const taskStats = calculateTaskStats();\n  const dwmStats = calculateDWMStats();\n\n  const tabs = [\n    { id: 'task', label: 'Task Report', icon: BarChart2 },\n    { id: 'timelog', label: 'Time Log Report', icon: Clock },\n    { id: 'consolidated_timelog', label: 'Consolidated Time Log Report', icon: Clock },\n    { id: 'dwm', label: 'DWM Report', icon: Calendar }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">Reports</h1>\n        <div className=\"flex space-x-3\">\n          <Button variant=\"outline\" className=\"flex items-center space-x-2 relative\" onClick={() => setShowFilterModal(true)}>\n            <Filter className=\"w-4 h-4\" />\n            <span>Filters</span>\n            {Object.values(taskReportFilters).some(value => value !== '' && value !== undefined) && (\n              <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n                {Object.values(taskReportFilters).filter(value => value !== '' && value !== undefined).length}\n              </span>\n            )}\n          </Button>\n          <Button variant=\"outline\" className=\"flex items-center space-x-2\">\n            <Download className=\"w-4 h-4\" />\n            <span>Export</span>\n          </Button>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            const isActive = activeTab === tab.id;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`\n                  flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm\n                  ${isActive\n                    ? 'border-indigo-500 text-indigo-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }\n                `}\n              >\n                <Icon className=\"w-4 h-4\" />\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"mt-6\">\n        {activeTab === 'task' && (\n          <TaskReport \n            stats={taskStats}\n            tasks={filterTasks(tasks, taskReportFilters)}\n            filters={taskReportFilters}\n            setFilters={setTaskReportFilters}\n            employees={employees}\n          />\n        )}\n\n        {activeTab === 'timelog' && (\n          <TimeLogReport />\n        )}\n\n        {activeTab === 'consolidated_timelog' && (\n          <ConsolidatedTimeLogReport />\n        )}\n\n        {activeTab === 'dwm' && (\n          <DWMReport \n            stats={dwmStats}\n            filters={dwmReportFilters}\n            setFilters={setDwmReportFilters}\n            employees={employees}\n          />\n        )}\n      </div>\n\n      {/* Filter Modal */}\n      <Modal\n        isOpen={showFilterModal}\n        onClose={() => setShowFilterModal(false)}\n        title=\"Filters\"\n      >\n        <div className=\"space-y-4\">\n          {/* Department Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Department</label>\n            <select\n              value={taskReportFilters.department}\n              onChange={(e) => setTaskReportFilters(prev => ({ ...prev, department: e.target.value }))}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">Select...</option>\n              {Array.from(new Set((employees || []).map(emp => emp.department))).map(dept => (\n                <option key={dept} value={dept}>{dept}</option>\n              ))}\n            </select>\n          </div>\n\n          {/* Assigned To Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Assigned To</label>\n            <select\n              value={taskReportFilters.assignedTo}\n              onChange={(e) => setTaskReportFilters(prev => ({ ...prev, assignedTo: e.target.value }))}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">Select employees...</option>\n              {(employees || []).map(emp => (\n                <option key={emp.id} value={emp.name}>{emp.name}</option>\n              ))}\n            </select>\n          </div>\n\n          {/* Priority Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Priority</label>\n            <select\n              value={taskReportFilters.priority || ''}\n              onChange={(e) => setTaskReportFilters(prev => ({ ...prev, priority: e.target.value }))}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">Select...</option>\n              <option value=\"High\">High</option>\n              <option value=\"Medium\">Medium</option>\n              <option value=\"Low\">Low</option>\n            </select>\n          </div>\n\n          {/* Label Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Label</label>\n            <select\n              value={taskReportFilters.label || ''}\n              onChange={(e) => setTaskReportFilters(prev => ({ ...prev, label: e.target.value }))}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">Select...</option>\n              <option value=\"Daily\">Daily</option>\n              <option value=\"Weekly\">Weekly</option>\n              <option value=\"Monthly\">Monthly</option>\n            </select>\n          </div>\n\n          {/* Status Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Status</label>\n            <select\n              value={taskReportFilters.status}\n              onChange={(e) => setTaskReportFilters(prev => ({ ...prev, status: e.target.value }))}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">Select...</option>\n              <option value=\"Pending\">Pending</option>\n              <option value=\"In Progress\">In Progress</option>\n              <option value=\"Completed\">Completed</option>\n              <option value=\"Due\">Due</option>\n            </select>\n          </div>\n\n          {/* Due Date Range */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Due Date From</label>\n              <input\n                type=\"date\"\n                value={taskReportFilters.dueDateFrom || ''}\n                onChange={(e) => setTaskReportFilters(prev => ({ ...prev, dueDateFrom: e.target.value }))}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Due Date To</label>\n              <input\n                type=\"date\"\n                value={taskReportFilters.dueDateTo || ''}\n                onChange={(e) => setTaskReportFilters(prev => ({ ...prev, dueDateTo: e.target.value }))}\n                className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              />\n            </div>\n          </div>\n\n          {/* Clear Filters Button */}\n          <div className=\"flex justify-end pt-4\">\n            <Button\n              variant=\"secondary\"\n              onClick={() => {\n                setTaskReportFilters({\n                  startDate: '',\n                  endDate: '',\n                  department: '',\n                  assignedTo: '',\n                  status: '',\n                  priority: '',\n                  label: '',\n                  dueDateFrom: '',\n                  dueDateTo: ''\n                });\n                setShowFilterModal(false);\n              }}\n            >\n              Clear Filters\n            </Button>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\n// Task Report Component\nconst TaskReport = ({ stats, tasks, filters, setFilters, employees }) => {\n  const handleFilterChange = (field, value) => {\n    setFilters(prev => ({ ...prev, [field]: value }));\n  };\n\n  const statCards = [\n    {\n      title: 'Total Tasks',\n      value: stats.total,\n      icon: Briefcase,\n      color: 'bg-purple-500',\n      bgColor: 'bg-purple-50'\n    },\n    {\n      title: 'Tasks Completed',\n      value: stats.completed,\n      icon: CheckCircle,\n      color: 'bg-green-500',\n      bgColor: 'bg-green-50'\n    },\n    {\n      title: 'Tasks In Progress',\n      value: stats.inProgress,\n      icon: Clock,\n      color: 'bg-blue-500',\n      bgColor: 'bg-blue-50'\n    },\n    {\n      title: 'Overdue Tasks',\n      value: stats.overdue,\n      icon: AlertTriangle,\n      color: 'bg-red-500',\n      bgColor: 'bg-red-50'\n    }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Date Range */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Date Range</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Date</label>\n            <div className=\"relative\">\n              <input\n                type=\"date\"\n                value={filters.startDate}\n                onChange={(e) => handleFilterChange('startDate', e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              />\n              <CalendarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Date</label>\n            <div className=\"relative\">\n              <input\n                type=\"date\"\n                value={filters.endDate}\n                onChange={(e) => handleFilterChange('endDate', e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              />\n              <CalendarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {statCards.map((stat, index) => {\n          const Icon = stat.icon;\n          return (\n            <div key={index} className={`${stat.bgColor} rounded-lg shadow p-6`}>\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-600\">{stat.title}</p>\n                  <p className=\"text-3xl font-bold text-gray-900\">{stat.value}</p>\n                </div>\n                <div className={`p-3 rounded-lg ${stat.color}`}>\n                  <Icon className=\"w-6 h-6 text-white\" />\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Tasks Table */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Task List</h3>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm text-left text-gray-500\">\n            <thead className=\"text-xs text-gray-700 uppercase bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3\">Task</th>\n                <th className=\"px-6 py-3\">Assigned To</th>\n                <th className=\"px-6 py-3\">Status</th>\n                <th className=\"px-6 py-3\">Due Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              {tasks.length === 0 ? (\n                <tr>\n                  <td colSpan=\"4\" className=\"px-6 py-4 text-center text-gray-500\">\n                    No tasks found\n                  </td>\n                </tr>\n              ) : (\n                (tasks || []).map((task) => (\n                  <tr key={task.id} className=\"bg-white border-b hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 font-medium text-gray-900\">\n                      {task.title}\n                    </td>\n                    <td className=\"px-6 py-4\">{task.assigned_to || 'N/A'}</td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                        task.status === 'Completed' ? 'bg-green-100 text-green-800' :\n                        task.status === 'In Progress' ? 'bg-blue-100 text-blue-800' :\n                        'bg-gray-100 text-gray-800'\n                      }`}>\n                        {task.status || 'To Do'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      {task.due_date ? new Date(task.due_date).toLocaleDateString() : 'N/A'}\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Time Log Report Component\nconst TimeLogReport = () => {\n  const [employees, setEmployees] = useState([]);\n  const [filters, setFilters] = useState({ startDate: '', endDate: '', employee: '', department: '' });\n  const [departments, setDepartments] = useState([]);\n  const [rows, setRows] = useState([]);\n  const [totalSeconds, setTotalSeconds] = useState(0);\n\n  useEffect(() => {\n    const init = async () => {\n      const [empRes, deptRes] = await Promise.all([\n        fetch('/api/employees?all=true'),\n        fetch('/api/departments')\n      ]);\n      if (empRes.ok) {\n        const empData = await empRes.json();\n        setEmployees(Array.isArray(empData.data) ? empData.data : (Array.isArray(empData) ? empData : []));\n      }\n      if (deptRes.ok) {\n        const deptData = await deptRes.json();\n        setDepartments(Array.isArray(deptData.data) ? deptData.data : (Array.isArray(deptData) ? deptData : []));\n      }\n    };\n    init();\n    // default last 7 days\n    const end = new Date();\n    const start = new Date();\n    start.setDate(end.getDate() - 6);\n    const toISO = (d) => new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().slice(0,10);\n    setFilters(f => ({ ...f, startDate: toISO(start), endDate: toISO(end) }));\n  }, []);\n\n  const formatHMS = (s) => {\n    // Ensure s is a proper number, not scientific notation\n    const seconds = parseInt(s, 10) || 0;\n    const h = Math.floor(seconds / 3600), m = Math.floor((seconds%3600)/60), sec = seconds%60;\n    return `${h}:${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;\n  };\n\n  const fetchReport = async () => {\n    if (!filters.startDate || !filters.endDate) return;\n    const params = new URLSearchParams({ start: filters.startDate, end: filters.endDate });\n    if (filters.employee) params.append('employee', filters.employee);\n    if (filters.department) params.append('department', filters.department);\n    const res = await fetch(`/api/reports/timelog?${params.toString()}`);\n    const data = res.ok ? await res.json() : { items: [], totalSeconds: 0 };\n    setRows(data.items || []);\n    setTotalSeconds(data.totalSeconds || 0);\n  };\n\n  useEffect(() => { fetchReport(); }, [filters.startDate, filters.endDate, filters.employee, filters.department]);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Time Log Report</h3>\n          <div className=\"text-sm text-gray-600\">Total: <span className=\"font-bold text-indigo-700\">{formatHMS(totalSeconds)}</span></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Date</label>\n            <input type=\"date\" value={filters.startDate} onChange={(e)=>setFilters(f=>({...f, startDate: e.target.value}))} className=\"w-full border rounded px-3 py-2\" />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Date</label>\n            <input type=\"date\" value={filters.endDate} onChange={(e)=>setFilters(f=>({...f, endDate: e.target.value}))} className=\"w-full border rounded px-3 py-2\" />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employee</label>\n            <select value={filters.employee} onChange={(e)=>setFilters(f=>({...f, employee: e.target.value}))} className=\"w-full border rounded px-3 py-2\">\n              <option value=\"\">All</option>\n              {(employees || []).map(emp => <option key={emp.id} value={emp.name}>{emp.name}</option>)}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Department</label>\n            <select value={filters.department} onChange={(e)=>setFilters(f=>({...f, department: e.target.value}))} className=\"w-full border rounded px-3 py-2\">\n              <option value=\"\">All</option>\n              {(departments || []).map(d => <option key={d.id} value={d.name}>{d.name}</option>)}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"bg-white rounded-lg shadow overflow-x-auto\">\n        <table className=\"min-w-full text-sm\">\n          <thead className=\"bg-gray-50 text-gray-700 uppercase text-xs\">\n            <tr>\n              <th className=\"px-6 py-3 text-left\">Employee</th>\n              <th className=\"px-6 py-3 text-left\">Task Name</th>\n              <th className=\"px-6 py-3 text-left\">Date</th>\n              <th className=\"px-6 py-3 text-left\">Label</th>\n              <th className=\"px-6 py-3 text-left\">Priority</th>\n              <th className=\"px-6 py-3 text-right\">Total Time</th>\n            </tr>\n          </thead>\n          <tbody>\n            {rows.map((r, idx) => (\n              <tr key={idx} className=\"border-b\">\n                <td className=\"px-6 py-3\">{r.employee_name}</td>\n                <td className=\"px-6 py-3\">{r.task_title}</td>\n                <td className=\"px-6 py-3\">{new Date(r.date).toLocaleDateString()}</td>\n                <td className=\"px-6 py-3\">{r.labels || '-'}</td>\n                <td className=\"px-6 py-3\">{r.priority || '-'}</td>\n                <td className=\"px-6 py-3 text-right font-mono text-indigo-700\">{formatHMS(r.seconds)}</td>\n              </tr>\n            ))}\n            {rows.length === 0 && (\n              <tr><td colSpan=\"6\" className=\"px-6 py-4 text-center text-gray-500\">No data</td></tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\n// Consolidated Time Log Report Component\nconst ConsolidatedTimeLogReport = () => {\n  const [employees, setEmployees] = useState([]);\n  const [filters, setFilters] = useState({ startDate: '', endDate: '', employee: '', department: '' });\n  const [departments, setDepartments] = useState([]);\n  const [rows, setRows] = useState([]);\n  const [totalSeconds, setTotalSeconds] = useState(0);\n\n  useEffect(() => {\n    const init = async () => {\n      const [empRes, deptRes] = await Promise.all([\n        fetch('/api/employees?all=true'),\n        fetch('/api/departments')\n      ]);\n      if (empRes.ok) {\n        const empData = await empRes.json();\n        setEmployees(Array.isArray(empData.data) ? empData.data : (Array.isArray(empData) ? empData : []));\n      }\n      if (deptRes.ok) {\n        const deptData = await deptRes.json();\n        setDepartments(Array.isArray(deptData.data) ? deptData.data : (Array.isArray(deptData) ? deptData : []));\n      }\n    };\n    init();\n    // default last 7 days\n    const end = new Date();\n    const start = new Date();\n    start.setDate(end.getDate() - 6);\n    const toISO = (d) => new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().slice(0,10);\n    setFilters(f => ({ ...f, startDate: toISO(start), endDate: toISO(end) }));\n  }, []);\n\n  const formatHMS = (s) => {\n    const seconds = parseInt(s, 10) || 0;\n    const h = Math.floor(seconds / 3600), m = Math.floor((seconds%3600)/60), sec = seconds%60;\n    return `${h}:${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;\n  };\n\n  const fetchReport = async () => {\n    if (!filters.startDate || !filters.endDate) return;\n    const params = new URLSearchParams({ start: filters.startDate, end: filters.endDate });\n    if (filters.employee) params.append('employee', filters.employee);\n    if (filters.department) params.append('department', filters.department);\n    // Fetch the existing timelog report and consolidate client-side to ensure data shows\n    const res = await fetch(`/api/reports/timelog?${params.toString()}`);\n    const data = res.ok ? await res.json() : { items: [], totalSeconds: 0 };\n    const list = Array.isArray(data.items) ? data.items : [];\n    const grouped = new Map();\n    for (const rec of list) {\n      const key = `${rec.employee_name}||${rec.task_title}||${rec.labels || ''}||${rec.priority || ''}`;\n      const seconds = parseInt(rec.seconds || 0, 10) || 0;\n      if (!grouped.has(key)) {\n        grouped.set(key, {\n          employee_name: rec.employee_name,\n          task_title: rec.task_title,\n          labels: rec.labels,\n          priority: rec.priority,\n          seconds: 0\n        });\n      }\n      grouped.get(key).seconds += seconds;\n    }\n    const consolidated = Array.from(grouped.values()).sort((a,b) => (b.seconds||0) - (a.seconds||0));\n    const total = consolidated.reduce((s, r) => s + (parseInt(r.seconds || 0, 10) || 0), 0);\n    setRows(consolidated);\n    setTotalSeconds(total);\n  };\n\n  useEffect(() => { fetchReport(); }, [filters.startDate, filters.endDate, filters.employee, filters.department]);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Consolidated Time Log Report</h3>\n          <div className=\"text-sm text-gray-600\">Total: <span className=\"font-bold text-indigo-700\">{formatHMS(totalSeconds)}</span></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Date</label>\n            <input type=\"date\" value={filters.startDate} onChange={(e)=>setFilters(f=>({...f, startDate: e.target.value}))} className=\"w-full border rounded px-3 py-2\" />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Date</label>\n            <input type=\"date\" value={filters.endDate} onChange={(e)=>setFilters(f=>({...f, endDate: e.target.value}))} className=\"w-full border rounded px-3 py-2\" />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employee</label>\n            <select value={filters.employee} onChange={(e)=>setFilters(f=>({...f, employee: e.target.value}))} className=\"w-full border rounded px-3 py-2\">\n              <option value=\"\">All</option>\n              {(employees || []).map(emp => <option key={emp.id} value={emp.name}>{emp.name}</option>)}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Department</label>\n            <select value={filters.department} onChange={(e)=>setFilters(f=>({...f, department: e.target.value}))} className=\"w-full border rounded px-3 py-2\">\n              <option value=\"\">All</option>\n              {(departments || []).map(d => <option key={d.id} value={d.name}>{d.name}</option>)}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"bg-white rounded-lg shadow overflow-x-auto\">\n        <table className=\"min-w-full text-sm\">\n          <thead className=\"bg-gray-50 text-gray-700 uppercase text-xs\">\n            <tr>\n              <th className=\"px-6 py-3 text-left\">Employee</th>\n              <th className=\"px-6 py-3 text-left\">Task Name</th>\n              <th className=\"px-6 py-3 text-left\">Label</th>\n              <th className=\"px-6 py-3 text-left\">Priority</th>\n              <th className=\"px-6 py-3 text-right\">Total Time</th>\n            </tr>\n          </thead>\n          <tbody>\n            {rows.map((r, idx) => (\n              <tr key={idx} className=\"border-b\">\n                <td className=\"px-6 py-3\">{r.employee_name}</td>\n                <td className=\"px-6 py-3\">{r.task_title}</td>\n                <td className=\"px-6 py-3\">{r.labels || '-'}</td>\n                <td className=\"px-6 py-3\">{r.priority || '-'}</td>\n                <td className=\"px-6 py-3 text-right font-mono text-indigo-700\">{formatHMS(r.seconds)}</td>\n              </tr>\n            ))}\n            {rows.length === 0 && (\n              <tr><td colSpan=\"5\" className=\"px-6 py-4 text-center text-gray-500\">No data</td></tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\n// DWM Report Component\nconst DWMReport = ({ stats, filters, setFilters, employees }) => {\n  const [departments, setDepartments] = useState([]);\n  const [detailModal, setDetailModal] = useState({ open: false, date: '', category: '', completed: true, items: [], totalSeconds: 0 });\n\n  // Fetch departments\n  useEffect(() => {\n    const fetchDepartments = async () => {\n      try {\n        const response = await fetch('/api/departments');\n        if (response.ok) {\n          const departmentsData = await response.json();\n          setDepartments(Array.isArray(departmentsData.data) ? departmentsData.data : (Array.isArray(departmentsData) ? departmentsData : []));\n        }\n      } catch (error) {\n        console.error('Error fetching departments:', error);\n      }\n    };\n    fetchDepartments();\n  }, []);\n\n  // Handle escape key for modal\n  useEffect(() => {\n    const handleEscapeKey = (event) => {\n      if (event.key === 'Escape' && detailModal.open) {\n        setDetailModal(prev => ({ ...prev, open: false }));\n      }\n    };\n\n    if (detailModal.open) {\n      document.addEventListener('keydown', handleEscapeKey);\n      // Prevent body scroll when modal is open\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = 'unset';\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEscapeKey);\n      document.body.style.overflow = 'unset';\n    };\n  }, [detailModal.open]);\n\n  const handleFilterChange = (field, value) => {\n    setFilters(prev => ({ ...prev, [field]: value }));\n  };\n\n  const openDetail = async (dateLabel, category, completed) => {\n    try {\n      // Convert pretty date label back to YYYY-MM-DD\n      // stats rows were built from dayList; rebuild using filters' start/end to map label\n      const dateObj = new Date(dateLabel);\n      // If dateLabel is not parseable (because it's long format), attempt to reconstruct with toLocaleDateString comparison\n      const start = new Date(filters.startDate);\n      const end = new Date(filters.endDate);\n      let iso = '';\n      for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\n        const pretty = new Date(d).toLocaleDateString('en-US', { weekday:'long', year:'numeric', month:'long', day:'numeric' });\n        if (pretty === dateLabel) {\n          const local = new Date(d.getTime() - d.getTimezoneOffset()*60000);\n          iso = local.toISOString().slice(0,10);\n          break;\n        }\n      }\n      if (!iso) {\n        const local = new Date(dateObj.getTime() - dateObj.getTimezoneOffset()*60000);\n        iso = local.toISOString().slice(0,10);\n      }\n      const params = new URLSearchParams({ date: iso, category, completed: String(completed) });\n      if (filters.department) params.append('department', filters.department);\n      if (filters.employee) params.append('employee', filters.employee);\n      const res = await fetch(`/api/reports/dwm/details?${params.toString()}`);\n      const data = res.ok ? await res.json() : { items: [], totalSeconds: 0 };\n      setDetailModal({ open: true, date: dateLabel, category, completed, items: data.items || [], totalSeconds: data.totalSeconds || 0 });\n    } catch (e) {\n      console.error('Failed to open detail modal', e);\n      setDetailModal({ open: true, date: dateLabel, category, completed, items: [], totalSeconds: 0 });\n    }\n  };\n\n  const formatHms = (totalSeconds) => {\n    const s = Math.max(0, parseInt(totalSeconds || 0, 10));\n    const h = Math.floor(s / 3600);\n    const m = Math.floor((s % 3600) / 60);\n    const sec = s % 60;\n    const pad = (n) => n.toString().padStart(2, '0');\n    return `${h}:${pad(m)}:${pad(sec)}`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Filters</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Department</label>\n            <select\n              value={filters.department}\n              onChange={(e) => handleFilterChange('department', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">Select...</option>\n              {(departments || []).map((dept) => (\n                <option key={dept.id} value={dept.name}>\n                  {dept.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employee</label>\n            <select\n              value={filters.employee}\n              onChange={(e) => handleFilterChange('employee', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            >\n              <option value=\"\">Select...</option>\n              {(employees || []).filter(emp => emp.status === 'Active').map((emp) => (\n                <option key={emp.id} value={emp.name}>\n                  {emp.name} ({emp.employee_id})\n                </option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Date</label>\n            <div className=\"relative\">\n              <input\n                type=\"date\"\n                value={filters.startDate}\n                onChange={(e) => handleFilterChange('startDate', e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              />\n              <CalendarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Date</label>\n            <div className=\"relative\">\n              <input\n                type=\"date\"\n                value={filters.endDate}\n                onChange={(e) => handleFilterChange('endDate', e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              />\n              <CalendarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* DWM Table */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm text-left text-gray-500\">\n            <thead className=\"text-xs text-gray-700 uppercase bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left\">Date</th>\n                <th className=\"px-6 py-3 text-right\">Daily</th>\n                <th className=\"px-6 py-3 text-right\">Weekly</th>\n                <th className=\"px-6 py-3 text-right\">Monthly</th>\n              </tr>\n            </thead>\n            <tbody>\n              {stats.map((stat, index) => (\n                <tr key={index} className={`bg-white border-b ${index % 2 === 0 ? 'bg-gray-50' : ''}`}>\n                  <td className=\"px-6 py-4 font-medium text-gray-900\">{stat.date}</td>\n                  <td className=\"px-6 py-4 text-right\">\n                    {/* clickable completed/total */}\n                    <button className=\"text-indigo-600 hover:underline mr-1\" onClick={() => openDetail(stat.date, 'daily', true)} title=\"View completed tasks\">\n                      {String(stat.daily).split('/')[0]}\n                    </button>\n                    /\n                    <button className=\"text-gray-600 hover:underline ml-1\" onClick={() => openDetail(stat.date, 'daily', false)} title=\"View not completed tasks\">\n                      {String(stat.daily).split('/')[1]}\n                    </button>\n                  </td>\n                  <td className=\"px-6 py-4 text-right\">\n                    {stat.weekly === 'N/A' ? 'N/A' : (\n                      <>\n                        <button className=\"text-indigo-600 hover:underline mr-1\" onClick={() => openDetail(stat.date, 'weekly', true)}>\n                          {String(stat.weekly).split('/')[0]}\n                        </button>\n                        /\n                        <button className=\"text-gray-600 hover:underline ml-1\" onClick={() => openDetail(stat.date, 'weekly', false)}>\n                          {String(stat.weekly).split('/')[1]}\n                        </button>\n                      </>\n                    )}\n                  </td>\n                  <td className=\"px-6 py-4 text-right\">\n                    {stat.monthly === 'N/A' ? 'N/A' : (\n                      <>\n                        <button className=\"text-indigo-600 hover:underline mr-1\" onClick={() => openDetail(stat.date, 'monthly', true)}>\n                          {String(stat.monthly).split('/')[0]}\n                        </button>\n                        /\n                        <button className=\"text-gray-600 hover:underline ml-1\" onClick={() => openDetail(stat.date, 'monthly', false)}>\n                          {String(stat.monthly).split('/')[1]}\n                        </button>\n                      </>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Detail Modal */}\n      {detailModal.open && (\n        <div \n          className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\"\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setDetailModal(prev => ({ ...prev, open: false }));\n            }\n          }}\n        >\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                {detailModal.completed ? 'Completed' : 'Not Completed'} {detailModal.category.toUpperCase()} tasks on {detailModal.date}\n              </h3>\n              <button \n                className=\"text-gray-400 hover:text-gray-600 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100\"\n                onClick={() => setDetailModal(prev => ({ ...prev, open: false }))}\n                aria-label=\"Close modal\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            {/* Modal Content - Scrollable */}\n            <div className=\"flex-1 overflow-hidden\">\n              {detailModal.items.length === 0 ? (\n                <div className=\"p-6 text-center\">\n                  <p className=\"text-gray-600\">No tasks found.</p>\n                </div>\n              ) : (\n                <div className=\"h-full overflow-y-auto\">\n                  <div className=\"p-6\">\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full text-sm\">\n                        <thead className=\"text-xs text-gray-700 uppercase bg-gray-50 sticky top-0\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-left font-medium\">Task Name</th>\n                            <th className=\"px-4 py-3 text-left font-medium\">Label</th>\n                            <th className=\"px-4 py-3 text-left font-medium\">Priority</th>\n                            <th className=\"px-4 py-3 text-right font-medium\">Time Spent</th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\n                          {detailModal.items.map((item, index) => (\n                            <tr key={item.id || index} className=\"hover:bg-gray-50 transition-colors duration-150\">\n                              <td className=\"px-4 py-3 font-medium text-gray-900 max-w-xs truncate\" title={item.title}>\n                                {item.title}\n                              </td>\n                              <td className=\"px-4 py-3 text-gray-600\">\n                                {item.labels || '-'}\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                                  item.priority === 'High' ? 'bg-red-100 text-red-800' :\n                                  item.priority === 'Medium' ? 'bg-yellow-100 text-yellow-800' :\n                                  item.priority === 'Low' ? 'bg-green-100 text-green-800' :\n                                  'bg-gray-100 text-gray-800'\n                                }`}>\n                                  {item.priority || '-'}\n                                </span>\n                              </td>\n                              <td className=\"px-4 py-3 text-right font-mono text-indigo-700 font-medium\">\n                                {formatHms(item.seconds)}\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            {/* Modal Footer */}\n            <div className=\"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0\">\n              <div className=\"text-sm text-gray-600\">\n                <span className=\"font-medium\">{detailModal.items.length}</span> task{detailModal.items.length !== 1 ? 's' : ''} found\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-sm text-gray-600\">Total Time:</div>\n                <div className=\"font-semibold text-gray-900 text-lg\">{formatHms(detailModal.totalSeconds)}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Reports; ","import React from 'react';\n\nconst Input = ({ \n  label, \n  name, \n  type = 'text', \n  placeholder = '', \n  required = false, \n  disabled = false,\n  defaultValue = '',\n  className = '',\n  onChange,\n  error,\n  ...props \n}) => {\n  return (\n    <div className={className}>\n      {label && (\n        <label htmlFor={name} className=\"block text-sm font-medium text-gray-700 mb-1\">\n          {label}\n          {required && <span className=\"text-red-500 ml-1\">*</span>}\n        </label>\n      )}\n      <input\n        id={name}\n        name={name}\n        type={type}\n        placeholder={placeholder}\n        required={required}\n        disabled={disabled}\n        onChange={onChange}\n        className={`\n          w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm\n          focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\n          disabled:bg-gray-50 disabled:text-gray-500\n          ${error ? 'border-red-500 focus:ring-red-500 focus:border-red-500' : ''}\n        `}\n        {...props}\n      />\n      {error && (\n        <p className=\"mt-1 text-sm text-red-600\">{error}</p>\n      )}\n    </div>\n  );\n};\n\nexport default Input; "],"names":["TaskReport","_ref","stats","tasks","filters","setFilters","employees","handleFilterChange","field","value","prev","statCards","title","total","icon","Briefcase","color","bgColor","completed","CheckCircle","inProgress","Clock","overdue","AlertTriangle","_jsxs","className","children","_jsx","type","startDate","onChange","e","target","CalendarIcon","endDate","map","stat","index","Icon","length","colSpan","task","assigned_to","status","due_date","Date","toLocaleDateString","id","TimeLogReport","setEmployees","useState","employee","department","departments","setDepartments","rows","setRows","totalSeconds","setTotalSeconds","useEffect","async","empRes","deptRes","Promise","all","fetch","ok","empData","json","Array","isArray","data","deptData","init","end","start","setDate","getDate","toISO","d","getTime","getTimezoneOffset","toISOString","slice","f","formatHMS","s","seconds","parseInt","h","Math","floor","m","sec","String","padStart","params","URLSearchParams","append","res","toString","items","fetchReport","emp","name","r","idx","employee_name","task_title","date","labels","priority","ConsolidatedTimeLogReport","list","grouped","Map","rec","key","has","set","get","consolidated","from","values","sort","a","b","reduce","DWMReport","_ref2","detailModal","setDetailModal","open","category","response","departmentsData","error","console","fetchDepartments","handleEscapeKey","event","document","addEventListener","body","style","overflow","removeEventListener","openDetail","dateLabel","dateObj","iso","weekday","year","month","day","formatHms","max","pad","n","dept","filter","employee_id","onClick","daily","split","weekly","_Fragment","monthly","currentTarget","toUpperCase","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","item","Reports","user","useAuth","activeTab","setActiveTab","setTasks","loading","setLoading","taskReportFilters","setTaskReportFilters","assignedTo","label","dueDateFrom","dueDateTo","dwmReportFilters","setDwmReportFilters","showFilterModal","setShowFilterModal","tasksUrl","reportParams","role","queryStr","tasksHeaders","JSON","stringify","permissions","log","userRole","userName","userPermissions","employeeName","tasksResponse","employeesResponse","headers","tasksData","employeesData","tasksStatus","employeesStatus","fetchData","filterTasks","taskList","_task$labels","created_at","toLowerCase","includes","dwmAggregates","setDwmAggregates","loadAggregates","taskStats","calculateTaskStats","filteredTasks","dwmStats","calculateDWMStats","isNaN","dayList","push","aggregates","dayIso","pretty","row","find","daily_completed","daily_total","weekly_completed","weekly_total","monthly_completed","monthly_total","dwmAggregatesToRows","tabs","BarChart2","Calendar","Button","variant","Filter","Object","some","undefined","Download","tab","isActive","Modal","isOpen","onClose","Set","placeholder","required","disabled","defaultValue","props","htmlFor"],"sourceRoot":""}