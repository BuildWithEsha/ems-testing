{"version":3,"file":"static/js/52.e9a02fde.chunk.js","mappings":"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","sources":["components/views/Appreciations.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Trash2 } from 'lucide-react';\n\nexport default function Appreciations() {\n  const [employees, setEmployees] = useState([]);\n  const [form, setForm] = useState({ employee_id: '', title: '', appreciation_date: '', description: '' });\n  const [submitting, setSubmitting] = useState(false);\n  const [items, setItems] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedAppreciations, setSelectedAppreciations] = useState([]);\n  const [deleting, setDeleting] = useState(false);\n\n  const [appreciationOptions, setAppreciationOptions] = useState([]);\n  const [showAddType, setShowAddType] = useState(false);\n  const [newTypeName, setNewTypeName] = useState('');\n\n  useEffect(() => {\n    const fetchInitial = async () => {\n      const [empRes, apprRes, typesRes] = await Promise.all([\n        fetch('/api/employees'),\n        fetch('/api/appreciations'),\n        fetch('/api/appreciation-types')\n      ]);\n      if (empRes.ok) {\n        const empData = await empRes.json();\n        setEmployees(Array.isArray(empData.data) ? empData.data : (Array.isArray(empData) ? empData : []));\n      }\n      if (apprRes.ok) setItems(await apprRes.json());\n      if (typesRes.ok) setAppreciationOptions((await typesRes.json()).map(t => t.name));\n    };\n    fetchInitial();\n  }, []);\n\n  const displayedItems = useMemo(() => {\n    const q = searchTerm.trim().toLowerCase();\n    if (!q) return items;\n    return items.filter(e => (e.employee_name || '').toLowerCase().includes(q));\n  }, [items, searchTerm]);\n\n  const submit = async (e) => {\n    e.preventDefault();\n    if (!form.employee_id || !form.title || !form.description.trim()) return alert('All fields are required.');\n    setSubmitting(true);\n    try {\n      const res = await fetch('/api/appreciations', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(form)\n      });\n      const text = await res.text();\n      let data;\n      try { data = JSON.parse(text); } catch { data = { error: text }; }\n      if (!res.ok) throw new Error(data.error || 'Failed to save');\n      setForm({ employee_id: '', title: '', appreciation_date: '', description: '' });\n      setItems(prev => [data.item, ...prev]);\n      alert('Saved');\n    } catch (err) {\n      alert(err.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Handle individual delete\n  const handleDelete = async (id) => {\n    if (!confirm('Are you sure you want to delete this appreciation record?')) return;\n    \n    setDeleting(true);\n    try {\n      const response = await fetch(`/api/appreciations/${id}`, {\n        method: 'DELETE',\n      });\n      \n      if (response.ok) {\n        setItems(prev => prev.filter(item => item.id !== id));\n        setSelectedAppreciations(prev => prev.filter(selectedId => selectedId !== id));\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Error deleting record');\n      }\n    } catch (error) {\n      console.error('Error deleting appreciation:', error);\n      alert('Error deleting record');\n    } finally {\n      setDeleting(false);\n    }\n  };\n\n  // Handle bulk delete\n  const handleBulkDelete = async () => {\n    if (selectedAppreciations.length === 0) {\n      alert('Please select appreciations to delete');\n      return;\n    }\n    \n    if (!confirm(`Are you sure you want to delete ${selectedAppreciations.length} appreciation record(s)?`)) return;\n    \n    setDeleting(true);\n    try {\n      const response = await fetch('/api/appreciations/bulk', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ ids: selectedAppreciations }),\n      });\n      \n      if (response.ok) {\n        const result = await response.json();\n        setItems(prev => prev.filter(item => !selectedAppreciations.includes(item.id)));\n        setSelectedAppreciations([]);\n        alert(result.message);\n      } else {\n        const error = await response.json();\n        alert(error.error || 'Error deleting records');\n      }\n    } catch (error) {\n      console.error('Error bulk deleting appreciations:', error);\n      alert('Error deleting records');\n    } finally {\n      setDeleting(false);\n    }\n  };\n\n  // Handle individual checkbox change\n  const handleSelectAppreciation = (appreciationId) => {\n    setSelectedAppreciations(prev => {\n      const newSelected = prev.includes(appreciationId)\n        ? prev.filter(id => id !== appreciationId)\n        : [...prev, appreciationId];\n      return newSelected;\n    });\n  };\n\n  // Handle select all checkbox\n  const handleSelectAll = () => {\n    const allDisplayedIds = displayedItems.map(item => item.id);\n    const allSelected = allDisplayedIds.every(id => selectedAppreciations.includes(id));\n    \n    if (allSelected) {\n      setSelectedAppreciations(prev => prev.filter(id => !allDisplayedIds.includes(id)));\n    } else {\n      setSelectedAppreciations(prev => [...new Set([...prev, ...allDisplayedIds])]);\n    }\n  };\n\n  return (\n    <div className=\"p-6\">\n      <h1 className=\"text-2xl font-semibold text-gray-900 mb-4\">Appreciations</h1>\n\n      <form onSubmit={submit} className=\"space-y-4 bg-white p-4 rounded border\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Employee</label>\n            <select value={form.employee_id} onChange={e=>setForm(f=>({ ...f, employee_id: e.target.value }))} className=\"w-full border rounded px-3 py-2\">\n              <option value=\"\">Select...</option>\n              {(employees || []).map(emp => <option key={emp.id} value={emp.id}>{emp.name}</option>)}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Appreciation</label>\n            <div className=\"flex gap-2\">\n              <select value={form.title} onChange={e=>setForm(f=>({ ...f, title: e.target.value }))} className=\"w-full border rounded px-3 py-2\">\n                <option value=\"\">Select...</option>\n                {appreciationOptions.map(opt => <option key={opt} value={opt}>{opt}</option>)}\n              </select>\n              <button type=\"button\" className=\"px-3 py-2 border rounded text-sm\" onClick={()=> setShowAddType(true)}>Add</button>\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\n            <input type=\"date\" value={form.appreciation_date} onChange={e=>setForm(f=>({ ...f, appreciation_date: e.target.value }))} className=\"w-full border rounded px-3 py-2\" />\n          </div>\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n          <textarea value={form.description} onChange={e=>setForm(f=>({ ...f, description: e.target.value }))} className=\"w-full border rounded px-3 py-2\" rows={4} />\n        </div>\n        <div className=\"flex justify-end\">\n          <button type=\"submit\" disabled={submitting} className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50\">{submitting ? 'Saving...' : 'Save'}</button>\n        </div>\n      </form>\n\n      {showAddType && (\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded shadow-lg w-full max-w-sm p-4\">\n            <div className=\"text-lg font-semibold mb-3\">Add Appreciation</div>\n            <div className=\"space-y-3\">\n              <input\n                type=\"text\"\n                value={newTypeName}\n                onChange={(e)=>setNewTypeName(e.target.value)}\n                placeholder=\"e.g. Outstanding Performance\"\n                className=\"w-full border rounded px-3 py-2\"\n              />\n              <div className=\"flex justify-end gap-2\">\n                <button type=\"button\" className=\"px-3 py-2 border rounded\" onClick={()=>{ setShowAddType(false); setNewTypeName(''); }}>Cancel</button>\n                <button\n                  type=\"button\"\n                  className=\"px-3 py-2 bg-indigo-600 text-white rounded\"\n                  onClick={async ()=>{\n                    const name = newTypeName.trim();\n                    if (!name) return;\n                    try {\n                      const res = await fetch('/api/appreciation-types', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json' },\n                        body: JSON.stringify({ name })\n                      });\n                      const text = await res.text();\n                      let data; try { data = JSON.parse(text); } catch { data = { error: text }; }\n                      if (!res.ok) throw new Error(data.error || 'Failed');\n                      const savedName = data.name || name;\n                      setAppreciationOptions(prev => Array.from(new Set([...prev, savedName])));\n                      setForm(f => ({ ...f, title: savedName }));\n                      setShowAddType(false);\n                      setNewTypeName('');\n                    } catch (err) {\n                      alert(err.message);\n                    }\n                  }}\n                >Save</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"mt-6 bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Appreciation Records</h2>\n            {selectedAppreciations.length > 0 && (\n              <button\n                onClick={handleBulkDelete}\n                disabled={deleting}\n                className=\"flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                {deleting ? 'Deleting...' : `Delete Selected (${selectedAppreciations.length})`}\n              </button>\n            )}\n          </div>\n          <input\n            type=\"text\"\n            placeholder=\"Search by employee...\"\n            value={searchTerm}\n            onChange={(e)=>setSearchTerm(e.target.value)}\n            className=\"border border-gray-300 rounded-lg px-3 py-2 w-64 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left\">\n                  <input\n                    type=\"checkbox\"\n                    checked={displayedItems.length > 0 && displayedItems.every(item => selectedAppreciations.includes(item.id))}\n                    onChange={handleSelectAll}\n                    className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                  />\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Employee</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Appreciation</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Description</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Created</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {displayedItems.length === 0 ? (\n                <tr>\n                  <td colSpan=\"7\" className=\"px-6 py-8 text-center text-gray-500\">\n                    No appreciation records found\n                  </td>\n                </tr>\n              ) : (\n                displayedItems.map(item => (\n                  <tr key={item.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedAppreciations.includes(item.id)}\n                        onChange={() => handleSelectAppreciation(item.id)}\n                        className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{item.employee_name}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{item.title}</td>\n                    <td className=\"px-6 py-4 text-sm text-gray-900 max-w-xs truncate\" title={item.description}>{item.description}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{item.appreciation_date ? new Date(item.appreciation_date).toLocaleDateString() : '-'}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{new Date(item.created_at).toLocaleString()}</td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                      <button\n                        onClick={() => handleDelete(item.id)}\n                        disabled={deleting}\n                        className=\"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed\"\n                        title=\"Delete appreciation\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":["Appreciations","employees","setEmployees","useState","form","setForm","employee_id","title","appreciation_date","description","submitting","setSubmitting","items","setItems","searchTerm","setSearchTerm","selectedAppreciations","setSelectedAppreciations","deleting","setDeleting","appreciationOptions","setAppreciationOptions","showAddType","setShowAddType","newTypeName","setNewTypeName","useEffect","async","empRes","apprRes","typesRes","Promise","all","fetch","ok","empData","json","Array","isArray","data","map","t","name","fetchInitial","displayedItems","useMemo","q","trim","toLowerCase","filter","e","employee_name","includes","_jsxs","className","children","_jsx","onSubmit","preventDefault","alert","res","method","headers","body","JSON","stringify","text","parse","error","Error","prev","item","err","message","value","onChange","f","target","emp","id","opt","type","onClick","rows","disabled","placeholder","savedName","from","Set","length","confirm","response","ids","result","console","Trash2","checked","every","handleSelectAll","allDisplayedIds","allSelected","colSpan","handleSelectAppreciation","appreciationId","Date","toLocaleDateString","created_at","toLocaleString","selectedId","handleDelete"],"sourceRoot":""}