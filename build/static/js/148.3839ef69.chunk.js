"use strict";(self.webpackChunkemployee_management_system=self.webpackChunkemployee_management_system||[]).push([[148],{1148:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(5043),r=s(579);const l=e=>{let{isOpen:t,onClose:s,onSave:l}=e;const[n,i]=(0,a.useState)({}),[d,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),[u,g]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&p()},[t]);const p=async()=>{try{o(!0),h("");const e=await fetch("http://localhost:5000/api/health-settings");if(!e.ok)throw new Error("Failed to fetch settings");const t=await e.json();i(t)}catch(e){h("Failed to fetch settings: "+e.message)}finally{o(!1)}},y=(e,t)=>{i(s=>({...s,[e]:{...s[e],value:t}}))},b=(e,t)=>"number"===t.type?(0,r.jsx)("input",{type:"number",value:t.value,onChange:t=>y(e,parseFloat(t.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",min:"0",step:"0.1"}):"boolean"===t.type?(0,r.jsx)("input",{type:"checkbox",checked:t.value,onChange:t=>y(e,t.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}):(0,r.jsx)("input",{type:"text",value:t.value,onChange:t=>y(e,t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"});return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Health Settings Configuration"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:d?(0,r.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):(0,r.jsxs)(r.Fragment,{children:[x&&(0,r.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-red-600",children:x})}),u&&(0,r.jsx)("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-green-600",children:u})}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Score Thresholds"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Top Rated Threshold"}),b("top_rated_threshold",n.top_rated_threshold||{value:300,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum score for TOP RATED EMPLOYEE"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Average Threshold"}),b("average_threshold",n.average_threshold||{value:200,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum score for AVERAGE EMPLOYEE"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Below Standard Threshold"}),b("below_standard_threshold",n.below_standard_threshold||{value:199,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum score for BELOW STANDARD EMPLOYEE"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Task Completion Settings"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Per Day"}),b("task_points_per_day",n.task_points_per_day||{value:2,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points awarded per day when all tasks are completed"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Cycle Months"}),b("task_cycle_months",n.task_cycle_months||{value:3,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Number of months for task management cycle"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Cycle Offset Days"}),b("task_cycle_offset_days",n.task_cycle_offset_days||{value:2,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Days to offset task cycle end date from today"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Working Hours Settings"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Per Month"}),b("hours_points_per_month",n.hours_points_per_month||{value:8,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points awarded per month when full hours are provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Hours Per Day"}),b("expected_hours_per_day",n.expected_hours_per_day||{value:8,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Expected working hours per day"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Working Days Per Week"}),b("working_days_per_week",n.working_days_per_week||{value:6,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Number of working days per week (Monday-Saturday)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HR Cycle Months"}),b("hr_cycle_months",n.hr_cycle_months||{value:3,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Number of months for HR cycle"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),"Error Deduction Settings"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"High Severity Deduction"}),b("error_high_deduction",n.error_high_deduction||{value:15,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points deducted per high severity error"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medium Severity Deduction"}),b("error_medium_deduction",n.error_medium_deduction||{value:8,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points deducted per medium severity error"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Severity Deduction"}),b("error_low_deduction",n.error_low_deduction||{value:3,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points deducted per low severity error"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),"Appreciation & Attendance Settings"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appreciation Bonus"}),b("appreciation_bonus",n.appreciation_bonus||{value:5,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points awarded per appreciation received"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attendance Deduction"}),b("attendance_deduction",n.attendance_deduction||{value:5,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points deducted per month with excessive absences"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Absences Per Month"}),b("max_absences_per_month",n.max_absences_per_month||{value:2,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum allowed absences per month before deduction"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Cycle Months"}),b("data_cycle_months",n.data_cycle_months||{value:3,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Number of months for data cycle (errors, appreciations)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-2"}),"Warning Letters Settings"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warning Letters Cycle Months"}),b("warning_letters_cycle_months",n.warning_letters_cycle_months||{value:6,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Number of months for warning letters cycle"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warning Letters Cycle Offset Days"}),b("warning_letters_cycle_offset_days",n.warning_letters_cycle_offset_days||{value:0,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Days to offset warning letters cycle end date from today"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Warning Deduction"}),b("warning_letters_deduction",n.warning_letters_deduction||{value:10,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default points deducted per warning letter"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"High Severity Deduction"}),b("warning_letters_severity_high_deduction",n.warning_letters_severity_high_deduction||{value:20,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points deducted per high severity warning letter"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medium Severity Deduction"}),b("warning_letters_severity_medium_deduction",n.warning_letters_severity_medium_deduction||{value:15,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points deducted per medium severity warning letter"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Severity Deduction"}),b("warning_letters_severity_low_deduction",n.warning_letters_severity_low_deduction||{value:10,type:"number"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Points deducted per low severity warning letter"})]})]})]})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone."))try{m(!0),h(""),g("");if(!(await fetch("http://localhost:5000/api/health-settings/reset",{method:"POST"})).ok)throw new Error("Failed to reset settings");g("Settings reset to defaults!"),setTimeout(()=>{p()},1500)}catch(e){h("Failed to reset settings: "+e.message)}finally{m(!1)}},disabled:c,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset to Defaults"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:async()=>{try{m(!0),h(""),g("");const e={};Object.keys(n).forEach(t=>{e[t]=n[t].value});if(!(await fetch("http://localhost:5000/api/health-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Failed to save settings");g("Settings saved successfully!"),setTimeout(()=>{l&&l(),s()},1500)}catch(e){h("Failed to save settings: "+e.message)}finally{m(!1)}},disabled:c||d,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Saving...":"Save Settings"})]})]})]})}):null},n=(0,a.memo)(()=>{const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)({}),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(""),[m,x]=(0,a.useState)("all"),[h,u]=(0,a.useState)("healthScore"),[g,p]=(0,a.useState)("desc"),[y,b]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f();const e=setTimeout(()=>{i&&(console.log("HealthDashboard - Loading timeout, setting loading to false"),d(!1))},1e4);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{e.length>0&&N()},[e]);const f=(0,a.useCallback)(async()=>{try{const e=await fetch("http://localhost:5000/api/employees");if(!e.ok)throw new Error("Failed to fetch employees");const s=await e.json(),a=Array.isArray(s.data)?s.data:Array.isArray(s)?s:[];console.log("HealthDashboard - Employees data:",a),t(a)}catch(e){console.error("Error fetching employees:",e),c("Failed to fetch employees: "+e.message),d(!1)}},[]),N=async()=>{try{if(d(!0),console.log("HealthDashboard - Fetching health data for",e.length,"employees"),0===e.length)return console.log("HealthDashboard - No employees to fetch health data for"),void d(!1);const t=(e||[]).map(e=>fetch(`http://localhost:5000/api/employees/${e.id}/health`).then(t=>t.ok?t.json():(console.warn(`Health API failed for employee ${e.id}:`,t.status),null)).catch(t=>(console.warn(`Health API error for employee ${e.id}:`,t.message),null))),s=await Promise.all(t),a={};(e||[]).forEach((e,t)=>{s[t]&&(a[e.id]=s[t])}),console.log("HealthDashboard - Health data fetched:",a),n(a),0===Object.keys(a).length&&console.warn("HealthDashboard - No health data available for any employees")}catch(t){console.error("Error fetching health data:",t),c("Failed to fetch health data: "+t.message)}finally{d(!1)}},w=function(e){var t,s;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(null===(t=a.top_rated_threshold)||void 0===t?void 0:t.value)||300,l=(null===(s=a.average_threshold)||void 0===s?void 0:s.value)||200;return e>=r?"text-green-600 bg-green-100":e>=l?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100"},k=e=>{switch(e){case"Excellent":return"text-green-600 bg-green-100";case"Good":return"text-blue-600 bg-blue-100";case"Average":return"text-orange-600 bg-orange-100";case"Poor":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},_=(0,a.useMemo)(()=>(()=>{let t=e;return y.trim()&&(t=t.filter(e=>{var t,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(y.toLowerCase()))})),"all"!==m&&(t=t.filter(e=>e.department===m)),t.sort((e,t)=>{const a=s[e.id],r=s[t.id];if(!a&&!r)return 0;if(!a)return 1;if(!r)return-1;let l,n;switch(h){case"healthScore":default:l=a.healthScore||0,n=r.healthScore||0;break;case"name":l=e.name,n=t.name;break;case"department":l=e.department,n=t.department}return"asc"===g?l>n?1:-1:l<n?1:-1}),t})(),[e,y,m,h,g,s]),S=(0,a.useMemo)(()=>(()=>{const e=Object.values(s).filter(e=>e);if(0===e.length)return null;const t=e.reduce((e,t)=>e+(t.healthScore||0),0)/e.length,a=e.filter(e=>"Excellent"===e.rating).length,r=e.filter(e=>"Good"===e.rating).length,l=e.filter(e=>"Average"===e.rating).length,n=e.filter(e=>"Poor"===e.rating).length;return{totalEmployees:e.length,averageScore:Math.round(t),excellent:a,good:r,average:l,poor:n}})(),[s]);return i?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-64",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading health dashboard..."}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Fetching employee data and health scores"})]}):o?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsxs)("p",{className:"text-red-600",children:["Error: ",o]}),(0,r.jsx)("button",{onClick:f,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Employee Health Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Monitor the overall health and performance status of all employees"})]}),(0,r.jsxs)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-200 flex items-center",children:[(0,r.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Health Settings"]})]})}),S&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-indigo-100",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Employees"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:S.totalEmployees})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Average Score"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:S.averageScore})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Excellent"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:S.excellent})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full bg-orange-100",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Needs Attention"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:S.average+S.poor})]})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,r.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,r.jsx)("option",{value:"all",children:"All Departments"}),[...new Set((e||[]).map(e=>e.department))].filter(e=>e).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employees"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("input",{type:"text",id:"search",value:y,onChange:e=>b(e.target.value),placeholder:"Search by name or email...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),y&&(0,r.jsx)("button",{onClick:()=>b(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,r.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,r.jsx)("option",{value:"healthScore",children:"Health Score"}),(0,r.jsx)("option",{value:"name",children:"Name"}),(0,r.jsx)("option",{value:"department",children:"Department"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),(0,r.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,r.jsx)("option",{value:"desc",children:"Descending"}),(0,r.jsx)("option",{value:"asc",children:"Ascending"})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{b(""),x("all"),u("healthScore"),p("desc")},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-200 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]}),(0,r.jsxs)("button",{onClick:N,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors duration-200 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Employee Health Status"}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[_.length," of ",e.length," employees",y&&(0,r.jsxs)("span",{className:"ml-2 text-indigo-600",children:['matching "',y,'"']})]})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Health Score"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task Completion"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Working Hours"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Errors"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Warning Letters"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(e=>{var t,a,l,n,i,d,o,c,m,x,h,u,g,p,y,b,v,j,f,N,_,S,L,C,M,E,A,D,H,P;const W=s[e.id];return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-indigo-600",children:(null===(t=e.name)||void 0===t||null===(a=t.charAt(0))||void 0===a?void 0:a.toUpperCase())||"E"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.department||"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:W?(0,r.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(W.healthScore)}`,children:W.healthScore||0}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:W?(0,r.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(W.rating)}`,children:W.rating||"N/A"}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W?(0,r.jsxs)("span",{className:(null===(l=W.calculations)||void 0===l||null===(n=l.tasks)||void 0===n?void 0:n.score)>=0?"text-green-600":"text-red-600",children:[(null===(i=W.calculations)||void 0===i||null===(d=i.tasks)||void 0===d?void 0:d.completed)||0,"/",(null===(o=W.calculations)||void 0===o||null===(c=o.tasks)||void 0===c?void 0:c.total)||0]}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:W?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4 min-w-[250px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Working Hours"]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Total Score"}),(0,r.jsx)("div",{className:"text-lg font-bold "+((null===(m=W.calculations)||void 0===m||null===(x=m.hours)||void 0===x?void 0:x.score)>=0?"text-green-600":"text-red-600"),children:(null===(h=W.calculations)||void 0===h||null===(u=h.hours)||void 0===u?void 0:u.score)||0})]})]}),(null===(g=W.calculations)||void 0===g||null===(p=g.hours)||void 0===p?void 0:p.monthlyBreakdown)&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs font-medium text-gray-700 mb-2 pb-1 border-b border-gray-200",children:[(0,r.jsx)("span",{}),(0,r.jsx)("span",{children:"Hours Required"}),(0,r.jsx)("span",{children:"Hours Provided"}),(0,r.jsx)("span",{children:"Points Earned"})]}),(0,r.jsx)("div",{className:"space-y-2",children:W.calculations.hours.monthlyBreakdown.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,r.jsx)("span",{className:"font-medium text-gray-800",children:e.month}),(0,r.jsx)("span",{className:"text-gray-600",children:"number"===typeof e.required?e.required.toFixed(0):e.required}),(0,r.jsx)("span",{className:"text-gray-600",children:"number"===typeof e.provided?e.provided.toFixed(0):e.provided}),(0,r.jsx)("span",{className:"font-semibold "+(e.points>0?"text-green-600":"text-red-600"),children:e.points})]},t))})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"8 points per month when full hours are provided"})]}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W?(0,r.jsxs)("span",{className:"text-red-600",children:["-",Math.abs((null===(y=W.calculations)||void 0===y||null===(b=y.errors)||void 0===b?void 0:b.score)||0)]}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W?(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsxs)("span",{className:"text-red-600 font-semibold",children:["-",Math.abs((null===(v=W.calculations)||void 0===v||null===(j=v.warningLetters)||void 0===j?void 0:j.score)||0)]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===(f=W.calculations)||void 0===f||null===(N=f.warningLetters)||void 0===N?void 0:N.high)>0&&(0,r.jsxs)("span",{className:"inline-block bg-red-100 text-red-800 px-1 rounded mr-1",children:["H:",W.calculations.warningLetters.high]}),(null===(_=W.calculations)||void 0===_||null===(S=_.warningLetters)||void 0===S?void 0:S.medium)>0&&(0,r.jsxs)("span",{className:"inline-block bg-yellow-100 text-yellow-800 px-1 rounded mr-1",children:["M:",W.calculations.warningLetters.medium]}),(null===(L=W.calculations)||void 0===L||null===(C=L.warningLetters)||void 0===C?void 0:C.low)>0&&(0,r.jsxs)("span",{className:"inline-block bg-orange-100 text-orange-800 px-1 rounded",children:["L:",W.calculations.warningLetters.low]}),!(null!==(M=W.calculations)&&void 0!==M&&null!==(E=M.warningLetters)&&void 0!==E&&E.high)&&!(null!==(A=W.calculations)&&void 0!==A&&null!==(D=A.warningLetters)&&void 0!==D&&D.medium)&&!(null!==(H=W.calculations)&&void 0!==H&&null!==(P=H.warningLetters)&&void 0!==P&&P.low)&&(0,r.jsx)("span",{className:"text-green-600",children:"No warnings"})]})]}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:W?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(W.healthScore>=300?"bg-green-100 text-green-800":W.healthScore>=200?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:W.healthScore>=300?"Healthy":W.healthScore>=200?"Warning":"Critical"}):(0,r.jsx)("span",{className:"text-gray-400",children:"N/A"})})]},e.id)})})]})}),0===_.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No employees found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your filters or refresh the data."})]}),_.length>0&&0===Object.keys(s).length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No health data available"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Health data is being calculated or is not available for the selected employees."}),(0,r.jsx)("button",{onClick:()=>{d(!0),N()},className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Retry"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Health Score Guidelines"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-blue-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-blue-800",children:"\ud83d\udfe2 Excellent (300+ points)"}),(0,r.jsx)("p",{children:"Employees performing at optimal levels with consistent task completion and minimal errors."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-blue-800",children:"\ud83d\udfe1 Average (200-299 points)"}),(0,r.jsx)("p",{children:"Employees with room for improvement in specific areas."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-blue-800",children:"\ud83d\udd34 Needs Attention (Below 200)"}),(0,r.jsx)("p",{children:"Employees requiring support and intervention to improve performance."})]})]})]}),(0,r.jsx)(l,{isOpen:v,onClose:()=>j(!1),onSave:()=>{N()}})]})});n.displayName="HealthDashboard";const i=n}}]);
//# sourceMappingURL=148.3839ef69.chunk.js.map