"use strict";(self.webpackChunkemployee_management_system=self.webpackChunkemployee_management_system||[]).push([[460],{1460:(e,s,l)=>{l.r(s),l.d(s,{default:()=>d});var r=l(5043),t=l(579);const d=e=>{var s,l,d,a,i,n,o,c,h,x,m,u,v,g,p,j,b,N,y,f,w,_,k,S,L,H,C,E,D,P,T,A,R,M,W,q,B,F,$,J,I,O;let{employeeId:Y}=e;const[z,G]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),[U,V]=(0,r.useState)(!0),[X,Z]=(0,r.useState)("");(0,r.useEffect)(()=>{Y&&(ee(),se())},[Y]);const ee=async()=>{try{V(!0);const e=await fetch(`/api/employees/${Y}/health`);if(!e.ok)throw new Error("Failed to fetch health data");const s=await e.json();G(s)}catch(e){Z(e.message),console.error("Error fetching health data:",e)}finally{V(!1)}},se=async()=>{try{const e=await fetch("/api/health-settings");if(!e.ok)throw new Error("Failed to fetch health settings");const s=await e.json();Q(s)}catch(e){console.error("Error fetching health settings:",e)}};if(U)return(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(X)return(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsxs)("p",{className:"text-red-600",children:["Error loading health data: ",X]}),(0,t.jsx)("button",{onClick:ee,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]});if(!z)return(0,t.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-gray-600",children:"No health data available"})});const{healthScore:le,rating:re,ratingColor:te,calculations:de,period:ae,cycles:ie}=z;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Employee Health Dashboard"}),(0,t.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"HR Cycle"}),(0,t.jsxs)("p",{className:"text-blue-700 text-sm",children:[null===ie||void 0===ie||null===(s=ie.hr)||void 0===s?void 0:s.description,": ",new Date(null===ie||void 0===ie||null===(l=ie.hr)||void 0===l?void 0:l.start).toLocaleDateString()," - ",new Date(null===ie||void 0===ie||null===(d=ie.hr)||void 0===d?void 0:d.end).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"Task Management Cycle"}),(0,t.jsxs)("p",{className:"text-green-700 text-sm",children:[null===ie||void 0===ie||null===(a=ie.task)||void 0===a?void 0:a.description,": ",new Date(null===ie||void 0===ie||null===(i=ie.task)||void 0===i?void 0:i.start).toLocaleDateString()," - ",new Date(null===ie||void 0===ie||null===(n=ie.task)||void 0===n?void 0:n.end).toLocaleDateString()]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"HR Cycle refreshes monthly on the 1st, Task Cycle updates daily"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,t.jsx)("div",{className:(e=>{const s="text-2xl font-bold text-center p-4 rounded-lg ";switch(e){case"green":return s+"bg-green-100 text-green-800 border-2 border-green-300";case"orange":return s+"bg-orange-100 text-orange-800 border-2 border-orange-300";case"red":return s+"bg-red-100 text-red-800 border-2 border-red-300";default:return s+"bg-gray-100 text-gray-800 border-2 border-gray-300"}})(te),children:re})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Overall Health Score"}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("div",{className:`text-6xl font-bold ${(e=>{var s,l;const r=(null===K||void 0===K||null===(s=K.top_rated_threshold)||void 0===s?void 0:s.value)||300,t=(null===K||void 0===K||null===(l=K.average_threshold)||void 0===l?void 0:l.value)||200;return e>=r?"text-green-600":e>=t?"text-orange-600":"text-red-600"})(le)}`,children:le}),(0,t.jsxs)("div",{className:"text-gray-500 text-sm mt-2",children:["out of ",(null===K||void 0===K||null===(o=K.top_rated_threshold)||void 0===o?void 0:o.value)||300,"+ points"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:(0,t.jsx)("div",{className:`h-4 rounded-full transition-all duration-500 ${(e=>{var s,l;const r=(null===K||void 0===K||null===(s=K.top_rated_threshold)||void 0===s?void 0:s.value)||300,t=(null===K||void 0===K||null===(l=K.average_threshold)||void 0===l?void 0:l.value)||200;return e>=r?"bg-green-500":e>=t?"bg-orange-500":"bg-red-500"})(le)}`,style:{width:`${Math.min(le/((null===K||void 0===K||null===(c=K.top_rated_threshold)||void 0===c?void 0:c.value)||300)*100,100)}%`}})}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,t.jsxs)("span",{children:["Below Standard (0-",(null===K||void 0===K||null===(h=K.average_threshold)||void 0===h?void 0:h.value)-1||199,")"]}),(0,t.jsxs)("span",{children:["Average (",(null===K||void 0===K||null===(x=K.average_threshold)||void 0===x?void 0:x.value)||200,"-",(null===K||void 0===K||null===(m=K.top_rated_threshold)||void 0===m?void 0:m.value)-1||299,")"]}),(0,t.jsxs)("span",{children:["Top Rated (",(null===K||void 0===K||null===(u=K.top_rated_threshold)||void 0===u?void 0:u.value)||300,"+)"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),"Task Completion"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Days Completed:"}),(0,t.jsxs)("span",{className:"font-semibold",children:[de.tasks.completed,"/",de.tasks.total]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Score:"}),(0,t.jsxs)("span",{className:"font-semibold "+(de.tasks.score>=0?"text-green-600":"text-red-600"),children:["+",de.tasks.score]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===K||void 0===K||null===(v=K.task_points_per_day)||void 0===v?void 0:v.value)||2," points per day when all daily, weekly, and monthly tasks are completed"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-2"}),"Working Hours"]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Total Score"}),(0,t.jsx)("div",{className:"text-2xl font-bold "+(de.hours.score>=0?"text-green-600":"text-red-600"),children:de.hours.score})]})]}),de.hours.monthlyBreakdown&&de.hours.monthlyBreakdown.length>0?(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm font-medium text-gray-700 mb-3 pb-2 border-b border-gray-200",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{children:"Hours Required"}),(0,t.jsx)("span",{children:"Hours Provided"}),(0,t.jsx)("span",{children:"Points Earned"})]}),(0,t.jsx)("div",{className:"space-y-3",children:de.hours.monthlyBreakdown.map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e.month}),(0,t.jsx)("span",{className:"text-gray-600",children:"number"===typeof e.required?e.required.toFixed(0):e.required}),(0,t.jsx)("span",{className:"text-gray-600",children:"number"===typeof e.provided?e.provided.toFixed(0):e.provided}),(0,t.jsx)("span",{className:"font-semibold "+(e.points>0?"text-green-600":"text-red-600"),children:e.points})]},s))})]}):(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm font-medium text-gray-700 mb-3 pb-2 border-b border-gray-200",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{children:"Hours Required"}),(0,t.jsx)("span",{children:"Hours Provided"}),(0,t.jsx)("span",{children:"Points Earned"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:"Jun 25"}),(0,t.jsx)("span",{className:"text-gray-600",children:"200"}),(0,t.jsx)("span",{className:"text-gray-600",children:"0"}),(0,t.jsx)("span",{className:"font-semibold text-red-600",children:"0"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:"Jul 25"}),(0,t.jsx)("span",{className:"text-gray-600",children:"216"}),(0,t.jsx)("span",{className:"text-gray-600",children:"0"}),(0,t.jsx)("span",{className:"font-semibold text-red-600",children:"0"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:"Aug 25"}),(0,t.jsx)("span",{className:"text-gray-600",children:"208"}),(0,t.jsx)("span",{className:"text-gray-600",children:"0"}),(0,t.jsx)("span",{className:"font-semibold text-red-600",children:"0"})]})]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-3",children:[(null===K||void 0===K||null===(g=K.hours_points_per_month)||void 0===g?void 0:g.value)||8," points per month when full hours are provided"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),"Error Deductions"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"High Priority:"}),(0,t.jsxs)("span",{className:"font-semibold text-red-600",children:[de.errors.high," (-",de.errors.high*((null===K||void 0===K||null===(p=K.error_high_deduction)||void 0===p?void 0:p.value)||5),")"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Medium Priority:"}),(0,t.jsxs)("span",{className:"font-semibold text-orange-600",children:[de.errors.medium," (-",de.errors.medium*((null===K||void 0===K||null===(j=K.error_medium_deduction)||void 0===j?void 0:j.value)||3),")"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Low Priority:"}),(0,t.jsxs)("span",{className:"font-semibold text-yellow-600",children:[de.errors.low," (-",de.errors.low*((null===K||void 0===K||null===(b=K.error_low_deduction)||void 0===b?void 0:b.value)||1),")"]})]}),(0,t.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Score:"}),(0,t.jsx)("span",{className:"font-semibold "+(de.errors.score>=0?"text-green-600":"text-red-600"),children:de.errors.score})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Appreciations"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Received:"}),(0,t.jsx)("span",{className:"font-semibold",children:de.appreciations.count})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Score:"}),(0,t.jsxs)("span",{className:"font-semibold "+(de.appreciations.score>=0?"text-green-600":"text-red-600"),children:["+",de.appreciations.score]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===K||void 0===K||null===(N=K.appreciation_bonus)||void 0===N?void 0:N.value)||5," points per appreciation received"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full mr-2"}),"Attendance"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Absences:"}),(0,t.jsx)("span",{className:"font-semibold",children:de.attendance.absences})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Score:"}),(0,t.jsx)("span",{className:"font-semibold "+(de.attendance.score>=0?"text-green-600":"text-red-600"),children:de.attendance.score})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["-",(null===K||void 0===K||null===(y=K.attendance_deduction)||void 0===y?void 0:y.value)||5," points per month with more than ",(null===K||void 0===K||null===(f=K.max_absences_per_month)||void 0===f?void 0:f.value)||2," absences"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-600 rounded-full mr-2"}),"Warning Letters"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"High Severity:"}),(0,t.jsxs)("span",{className:"font-semibold text-red-600",children:[(null===(w=de.warningLetters)||void 0===w?void 0:w.high)||0," (-",(null===(_=de.warningLetters)||void 0===_?void 0:_.high)*((null===K||void 0===K||null===(k=K.warning_letters_severity_high_deduction)||void 0===k?void 0:k.value)||20)||0,")"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Medium Severity:"}),(0,t.jsxs)("span",{className:"font-semibold text-orange-600",children:[(null===(S=de.warningLetters)||void 0===S?void 0:S.medium)||0," (-",(null===(L=de.warningLetters)||void 0===L?void 0:L.medium)*((null===K||void 0===K||null===(H=K.warning_letters_severity_medium_deduction)||void 0===H?void 0:H.value)||15)||0,")"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Low Severity:"}),(0,t.jsxs)("span",{className:"font-semibold text-yellow-600",children:[(null===(C=de.warningLetters)||void 0===C?void 0:C.low)||0," (-",(null===(E=de.warningLetters)||void 0===E?void 0:E.low)*((null===K||void 0===K||null===(D=K.warning_letters_severity_low_deduction)||void 0===D?void 0:D.value)||10)||0,")"]})]}),(0,t.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Score:"}),(0,t.jsx)("span",{className:"font-semibold "+((null===(P=de.warningLetters)||void 0===P?void 0:P.score)>=0?"text-green-600":"text-red-600"),children:(null===(T=de.warningLetters)||void 0===T?void 0:T.score)||0})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Warning letters affect health score based on severity level"})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6 flex items-center justify-center",children:(0,t.jsxs)("button",{onClick:ee,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Health Score"]})})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"How Your Health Score is Calculated"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Positive Points:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["\u2022 Task Completion: +",(null===K||void 0===K||null===(A=K.task_points_per_day)||void 0===A?void 0:A.value)||2," points per day (all tasks completed)"]}),(0,t.jsxs)("li",{children:["\u2022 Working Hours: +",(null===K||void 0===K||null===(R=K.hours_points_per_month)||void 0===R?void 0:R.value)||8," points per month (full hours provided)"]}),(0,t.jsxs)("li",{children:["\u2022 Appreciations: +",(null===K||void 0===K||null===(M=K.appreciation_bonus)||void 0===M?void 0:M.value)||5," points per appreciation"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Deductions:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["\u2022 High Priority Errors: -",(null===K||void 0===K||null===(W=K.error_high_deduction)||void 0===W?void 0:W.value)||5," points each"]}),(0,t.jsxs)("li",{children:["\u2022 Medium Priority Errors: -",(null===K||void 0===K||null===(q=K.error_medium_deduction)||void 0===q?void 0:q.value)||3," points each"]}),(0,t.jsxs)("li",{children:["\u2022 Low Priority Errors: -",(null===K||void 0===K||null===(B=K.error_low_deduction)||void 0===B?void 0:B.value)||1," point each"]}),(0,t.jsxs)("li",{children:["\u2022 Attendance: -",(null===K||void 0===K||null===(F=K.attendance_deduction)||void 0===F?void 0:F.value)||5," points per month (>",(null===K||void 0===K||null===($=K.max_absences_per_month)||void 0===$?void 0:$.value)||2," absences)"]}),(0,t.jsxs)("li",{children:["\u2022 Warning Letters: -",(null===K||void 0===K||null===(J=K.warning_letters_severity_high_deduction)||void 0===J?void 0:J.value)||20," (High), -",(null===K||void 0===K||null===(I=K.warning_letters_severity_medium_deduction)||void 0===I?void 0:I.value)||15," (Medium), -",(null===K||void 0===K||null===(O=K.warning_letters_severity_low_deduction)||void 0===O?void 0:O.value)||10," (Low)"]})]})]})]})]})]})}}}]);
//# sourceMappingURL=460.8174cc41.chunk.js.map