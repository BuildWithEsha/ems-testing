{"version":3,"file":"static/js/379.ad520080.chunk.js","mappings":"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","sources":["components/views/WarningLetters.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Trash2 } from 'lucide-react';\r\n\r\nexport default function WarningLetters() {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [form, setForm] = useState({ employee_id: '', title: '', warning_date: '', description: '', severity: 'Low' });\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [items, setItems] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedWarnings, setSelectedWarnings] = useState([]);\r\n  const [deleting, setDeleting] = useState(false);\r\n\r\n  const [warningOptions, setWarningOptions] = useState([]);\r\n  const [showAddType, setShowAddType] = useState(false);\r\n  const [newTypeName, setNewTypeName] = useState('');\r\n\r\n  const severityOptions = [\r\n    { value: 'Low', label: 'Low', color: 'text-yellow-600 bg-yellow-100' },\r\n    { value: 'Medium', label: 'Medium', color: 'text-orange-600 bg-orange-100' },\r\n    { value: 'High', label: 'High', color: 'text-red-600 bg-red-100' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const fetchInitial = async () => {\r\n      const [empRes, warnRes, typesRes] = await Promise.all([\r\n        fetch('http://localhost:5000/api/employees'),\r\n        fetch('http://localhost:5000/api/warning-letters'),\r\n        fetch('http://localhost:5000/api/warning-letter-types')\r\n      ]);\r\n      if (empRes.ok) {\r\n        const empData = await empRes.json();\r\n        setEmployees(Array.isArray(empData.data) ? empData.data : (Array.isArray(empData) ? empData : []));\r\n      }\r\n      if (warnRes.ok) setItems(await warnRes.json());\r\n      if (typesRes.ok) setWarningOptions((await typesRes.json()).map(t => t.name));\r\n    };\r\n    fetchInitial();\r\n  }, []);\r\n\r\n  const displayedItems = useMemo(() => {\r\n    const q = searchTerm.trim().toLowerCase();\r\n    if (!q) return items;\r\n    return items.filter(e => (e.employee_name || '').toLowerCase().includes(q));\r\n  }, [items, searchTerm]);\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    if (!form.employee_id || !form.title || !form.description.trim()) return alert('All fields are required.');\r\n    setSubmitting(true);\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/warning-letters', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(form)\r\n      });\r\n      const text = await res.text();\r\n      let data;\r\n      try { data = JSON.parse(text); } catch { data = { error: text }; }\r\n      if (!res.ok) throw new Error(data.error || 'Failed to save');\r\n      setForm({ employee_id: '', title: '', warning_date: '', description: '', severity: 'Low' });\r\n      setItems(prev => [data.item, ...prev]);\r\n      alert('Warning letter saved successfully');\r\n    } catch (err) {\r\n      alert(err.message);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Handle individual delete\r\n  const handleDelete = async (id) => {\r\n    if (!confirm('Are you sure you want to delete this warning letter record?')) return;\r\n    \r\n    setDeleting(true);\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/warning-letters/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n      \r\n      if (response.ok) {\r\n        setItems(prev => prev.filter(item => item.id !== id));\r\n        setSelectedWarnings(prev => prev.filter(selectedId => selectedId !== id));\r\n      } else {\r\n        const error = await response.json();\r\n        alert(error.error || 'Error deleting record');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting warning letter:', error);\r\n      alert('Error deleting record');\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  // Handle bulk delete\r\n  const handleBulkDelete = async () => {\r\n    if (selectedWarnings.length === 0) {\r\n      alert('Please select warning letters to delete');\r\n      return;\r\n    }\r\n    \r\n    if (!confirm(`Are you sure you want to delete ${selectedWarnings.length} warning letter record(s)?`)) return;\r\n    \r\n    setDeleting(true);\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/warning-letters/bulk', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ ids: selectedWarnings }),\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setItems(prev => prev.filter(item => !selectedWarnings.includes(item.id)));\r\n        setSelectedWarnings([]);\r\n        alert(result.message);\r\n      } else {\r\n        const error = await response.json();\r\n        alert(error.error || 'Error deleting records');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error bulk deleting warning letters:', error);\r\n      alert('Error deleting records');\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  // Handle individual checkbox change\r\n  const handleSelectWarning = (warningId) => {\r\n    setSelectedWarnings(prev => {\r\n      const newSelected = prev.includes(warningId)\r\n        ? prev.filter(id => id !== warningId)\r\n        : [...prev, warningId];\r\n      return newSelected;\r\n    });\r\n  };\r\n\r\n  // Handle select all checkbox\r\n  const handleSelectAll = () => {\r\n    const allDisplayedIds = displayedItems.map(item => item.id);\r\n    const allSelected = allDisplayedIds.every(id => selectedWarnings.includes(id));\r\n    \r\n    if (allSelected) {\r\n      setSelectedWarnings(prev => prev.filter(id => !allDisplayedIds.includes(id)));\r\n    } else {\r\n      setSelectedWarnings(prev => [...new Set([...prev, ...allDisplayedIds])]);\r\n    }\r\n  };\r\n\r\n  const getSeverityColor = (severity) => {\r\n    const option = severityOptions.find(opt => opt.value === severity);\r\n    return option ? option.color : 'text-gray-600 bg-gray-100';\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-semibold text-gray-900 mb-4\">Warning Letters</h1>\r\n\r\n      <form onSubmit={submit} className=\"space-y-4 bg-white p-4 rounded border\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Employee</label>\r\n            <select value={form.employee_id} onChange={e=>setForm(f=>({ ...f, employee_id: e.target.value }))} className=\"w-full border rounded px-3 py-2\">\r\n              <option value=\"\">Select...</option>\r\n              {(employees || []).map(emp => <option key={emp.id} value={emp.id}>{emp.name}</option>)}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Warning Type</label>\r\n            <div className=\"flex gap-2\">\r\n              <select value={form.title} onChange={e=>setForm(f=>({ ...f, title: e.target.value }))} className=\"w-full border rounded px-3 py-2\">\r\n                <option value=\"\">Select...</option>\r\n                {warningOptions.map(opt => <option key={opt} value={opt}>{opt}</option>)}\r\n              </select>\r\n              <button type=\"button\" className=\"px-3 py-2 border rounded text-sm\" onClick={()=> setShowAddType(true)}>Add</button>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\r\n            <input type=\"date\" value={form.warning_date} onChange={e=>setForm(f=>({ ...f, warning_date: e.target.value }))} className=\"w-full border rounded px-3 py-2\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Severity</label>\r\n            <select value={form.severity} onChange={e=>setForm(f=>({ ...f, severity: e.target.value }))} className=\"w-full border rounded px-3 py-2\">\r\n              {severityOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n          <textarea value={form.description} onChange={e=>setForm(f=>({ ...f, description: e.target.value }))} className=\"w-full border rounded px-3 py-2\" rows={4} placeholder=\"Describe the warning details...\" />\r\n        </div>\r\n        <div className=\"flex justify-end\">\r\n          <button type=\"submit\" disabled={submitting} className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50\">{submitting ? 'Saving...' : 'Save Warning Letter'}</button>\r\n        </div>\r\n      </form>\r\n\r\n      {showAddType && (\r\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded shadow-lg w-full max-w-sm p-4\">\r\n            <div className=\"text-lg font-semibold mb-3\">Add Warning Type</div>\r\n            <div className=\"space-y-3\">\r\n              <input\r\n                type=\"text\"\r\n                value={newTypeName}\r\n                onChange={(e)=>setNewTypeName(e.target.value)}\r\n                placeholder=\"e.g. Attendance Violation\"\r\n                className=\"w-full border rounded px-3 py-2\"\r\n              />\r\n              <div className=\"flex justify-end gap-2\">\r\n                <button type=\"button\" className=\"px-3 py-2 border rounded\" onClick={()=>{ setShowAddType(false); setNewTypeName(''); }}>Cancel</button>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"px-3 py-2 bg-red-600 text-white rounded\"\r\n                  onClick={async ()=>{\r\n                    const name = newTypeName.trim();\r\n                    if (!name) return;\r\n                    try {\r\n                      const res = await fetch('http://localhost:5000/api/warning-letter-types', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ name })\r\n                      });\r\n                      const text = await res.text();\r\n                      let data; try { data = JSON.parse(text); } catch { data = { error: text }; }\r\n                      if (!res.ok) throw new Error(data.error || 'Failed');\r\n                      const savedName = data.name || name;\r\n                      setWarningOptions(prev => Array.from(new Set([...prev, savedName])));\r\n                      setForm(f => ({ ...f, title: savedName }));\r\n                      setShowAddType(false);\r\n                      setNewTypeName('');\r\n                    } catch (err) {\r\n                      alert(err.message);\r\n                    }\r\n                  }}\r\n                >Save</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"mt-6 bg-white rounded-lg shadow-sm border\">\r\n        <div className=\"px-6 py-4 border-b flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Warning Letter Records</h2>\r\n            {selectedWarnings.length > 0 && (\r\n              <button\r\n                onClick={handleBulkDelete}\r\n                disabled={deleting}\r\n                className=\"flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                {deleting ? 'Deleting...' : `Delete Selected (${selectedWarnings.length})`}\r\n              </button>\r\n            )}\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by employee...\"\r\n            value={searchTerm}\r\n            onChange={(e)=>setSearchTerm(e.target.value)}\r\n            className=\"border border-gray-300 rounded-lg px-3 py-2 w-64 focus:ring-2 focus:ring-red-500 focus:border-red-500\"\r\n          />\r\n        </div>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={displayedItems.length > 0 && displayedItems.every(item => selectedWarnings.includes(item.id))}\r\n                    onChange={handleSelectAll}\r\n                    className=\"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded\"\r\n                  />\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Employee</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Warning Type</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Severity</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Description</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Created</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {displayedItems.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"px-6 py-8 text-center text-gray-500\">\r\n                    No warning letter records found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                displayedItems.map(item => (\r\n                  <tr key={item.id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedWarnings.includes(item.id)}\r\n                        onChange={() => handleSelectWarning(item.id)}\r\n                        className=\"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{item.employee_name}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{item.title}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getSeverityColor(item.severity)}`}>\r\n                        {item.severity}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-sm text-gray-900 max-w-xs truncate\" title={item.description}>{item.description}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{item.warning_date ? new Date(item.warning_date).toLocaleDateString() : '-'}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{new Date(item.created_at).toLocaleString()}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                      <button\r\n                        onClick={() => handleDelete(item.id)}\r\n                        disabled={deleting}\r\n                        className=\"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        title=\"Delete warning letter\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["WarningLetters","employees","setEmployees","useState","form","setForm","employee_id","title","warning_date","description","severity","submitting","setSubmitting","items","setItems","searchTerm","setSearchTerm","selectedWarnings","setSelectedWarnings","deleting","setDeleting","warningOptions","setWarningOptions","showAddType","setShowAddType","newTypeName","setNewTypeName","severityOptions","value","label","color","useEffect","async","empRes","warnRes","typesRes","Promise","all","fetch","ok","empData","json","Array","isArray","data","map","t","name","fetchInitial","displayedItems","useMemo","q","trim","toLowerCase","filter","e","employee_name","includes","getSeverityColor","option","find","opt","_jsxs","className","children","_jsx","onSubmit","preventDefault","alert","res","method","headers","body","JSON","stringify","text","parse","error","Error","prev","item","err","message","onChange","f","target","emp","id","type","onClick","rows","placeholder","disabled","savedName","from","Set","length","confirm","response","ids","result","console","Trash2","checked","every","handleSelectAll","allDisplayedIds","allSelected","colSpan","handleSelectWarning","warningId","Date","toLocaleDateString","created_at","toLocaleString","selectedId","handleDelete"],"sourceRoot":""}